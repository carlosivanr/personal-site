{"title":"Set up venv in Python","markdown":{"yaml":{"title":"Set up venv in Python","html":{"toc":true},"execute":{"eval":false}},"headingText":"Configure virtual environments in Python","containsRefs":false,"markdown":"\n\nSimilar to R, installing Python creates a global environment. However, it is recommended to create a virtual environment for each project akin to an renv in R. Creating a virtual environment for each project avoids package conflicts amongs multiple projects. The virtual environment should be created in the root directory of the project folder.\n\n## Create a virtual environment\nTo create a Python virtual environment:\n\n* Open Positron/VS Code/RStudio\n  * If using RStudio, ensure Powershell is your designated terminal in Global Options\n* Select the Terminal tab\n* Navigate to the project's root directory\n* Execute the following command replacing [virtual-environment-name] with the name of the environment.\n```{r}\npython -m venv [virtual-environment-name]\n\n# Alternative command if the above does not work\npy -m venv [virtual-environment-name]\n```\n\nn.b. In Positron, creating a virtual environment may result in a message to install ipykernel. Select yes if prompted. Also, depending on the installation, the python -m venv command may not work, but the py -m venv will. This could be due to different configurations of how python was installed on a machine or whether or not its set in the path.\n\n## Activate a virtual environment\nAfter a virtual environment is created it must be activated. In R, an renv enabled project will always load the designated renv. In contrast, a Python virtual environment has to be activated manually. To activate a Python virtual environment, use the Windows PowerShell to navigate to the root project directory. From there run the Activateps1 file. When the python environment is active, the name of command prompt will change to show the virtual environment name in parentheses[^1]. If using Command Prompt as your shell, then execute the activate.bat file.\n```{r}\n.\\py_env\\Scripts\\Activate.ps1\n```\n\n## spawn cmd noent error\nUpon restarting Positron, I've encountered a `spawn cmd noent` error and the application fails to activate the virtual environment. To overcome this error, set PATH environment variable to \"C:\\\\Windows\\\\System32\\\\\" per\tthis [post](https://github.com/forcedotcom/salesforcedx-vscode/issues/1818) from baibalorenzo.\n\n# Package management\n## Install modules\nWhen a virtual environment is activated all subsequently installed packages will only be available in that environment. To install packages use pip, the package installer for python in the Terminal tab. This marks as an important difference between R and Python. In R, packages can be installed from the console. In Python, packages need to be installed from the shell/terminal in an activated environment.\n```{r}\npip install [module-name]\n```\n\n## Save modules in a virtual environment to requirements.txt\nAfter installing all desired packages, one can create a \"requirements.txt\" file. This file records each package and its version which can later be used to install the same set of packages in a different environment.\n```{r}\npip freeze > requirements.txt\n```\n\n## Install modules from requirements.txt\nIf a requirements.txt file is available from a different project using the same packages, that file can be copied and pasted into the virtual environment directory and used to automatically install packages.\n```{r}\npip install -r requirements.txt\n```\n\n## Check Quarto installation\nIn an activated virtual environment, run the following command to check the Quarto installation. This command checks that Quarto and Python are configured properly. In my experience, the python packages nbformat and nbclient are often required for Quarto to work properly. \n```{r}\nquarto check\n\npip install nbformat\n\npip install nbclient\n```\n\nIf the Quarto installation is properly configured, create a .qmd document to test it. Copy and paste the .qmd code in this Quarto [link](https://quarto.org/docs/computations/python.html) and save the file as matplotlib_demo.qmd. Next, install matplotlib to the virtual environment using pip install. Finally, render the .qmd file using the \"Preview\" button near the top right hand corner of the text editor in Positron. This button looks like an icon for a newspaper. If the file renders, then you're good to go. If not there may be some additional troubleshooting to go through.\n```{r}\npip install matplotlib\n```\n\n[^1]: It is possible that the desired virtual environment is activated, but does not appear so because the command prompt does not display the name in parentheses. Positron will display a message in the lower right hand corner of the application when this occurs.","srcMarkdownNoYaml":"\n\n# Configure virtual environments in Python \nSimilar to R, installing Python creates a global environment. However, it is recommended to create a virtual environment for each project akin to an renv in R. Creating a virtual environment for each project avoids package conflicts amongs multiple projects. The virtual environment should be created in the root directory of the project folder.\n\n## Create a virtual environment\nTo create a Python virtual environment:\n\n* Open Positron/VS Code/RStudio\n  * If using RStudio, ensure Powershell is your designated terminal in Global Options\n* Select the Terminal tab\n* Navigate to the project's root directory\n* Execute the following command replacing [virtual-environment-name] with the name of the environment.\n```{r}\npython -m venv [virtual-environment-name]\n\n# Alternative command if the above does not work\npy -m venv [virtual-environment-name]\n```\n\nn.b. In Positron, creating a virtual environment may result in a message to install ipykernel. Select yes if prompted. Also, depending on the installation, the python -m venv command may not work, but the py -m venv will. This could be due to different configurations of how python was installed on a machine or whether or not its set in the path.\n\n## Activate a virtual environment\nAfter a virtual environment is created it must be activated. In R, an renv enabled project will always load the designated renv. In contrast, a Python virtual environment has to be activated manually. To activate a Python virtual environment, use the Windows PowerShell to navigate to the root project directory. From there run the Activateps1 file. When the python environment is active, the name of command prompt will change to show the virtual environment name in parentheses[^1]. If using Command Prompt as your shell, then execute the activate.bat file.\n```{r}\n.\\py_env\\Scripts\\Activate.ps1\n```\n\n## spawn cmd noent error\nUpon restarting Positron, I've encountered a `spawn cmd noent` error and the application fails to activate the virtual environment. To overcome this error, set PATH environment variable to \"C:\\\\Windows\\\\System32\\\\\" per\tthis [post](https://github.com/forcedotcom/salesforcedx-vscode/issues/1818) from baibalorenzo.\n\n# Package management\n## Install modules\nWhen a virtual environment is activated all subsequently installed packages will only be available in that environment. To install packages use pip, the package installer for python in the Terminal tab. This marks as an important difference between R and Python. In R, packages can be installed from the console. In Python, packages need to be installed from the shell/terminal in an activated environment.\n```{r}\npip install [module-name]\n```\n\n## Save modules in a virtual environment to requirements.txt\nAfter installing all desired packages, one can create a \"requirements.txt\" file. This file records each package and its version which can later be used to install the same set of packages in a different environment.\n```{r}\npip freeze > requirements.txt\n```\n\n## Install modules from requirements.txt\nIf a requirements.txt file is available from a different project using the same packages, that file can be copied and pasted into the virtual environment directory and used to automatically install packages.\n```{r}\npip install -r requirements.txt\n```\n\n## Check Quarto installation\nIn an activated virtual environment, run the following command to check the Quarto installation. This command checks that Quarto and Python are configured properly. In my experience, the python packages nbformat and nbclient are often required for Quarto to work properly. \n```{r}\nquarto check\n\npip install nbformat\n\npip install nbclient\n```\n\nIf the Quarto installation is properly configured, create a .qmd document to test it. Copy and paste the .qmd code in this Quarto [link](https://quarto.org/docs/computations/python.html) and save the file as matplotlib_demo.qmd. Next, install matplotlib to the virtual environment using pip install. Finally, render the .qmd file using the \"Preview\" button near the top right hand corner of the text editor in Positron. This button looks like an icon for a newspaper. If the file renders, then you're good to go. If not there may be some additional troubleshooting to go through.\n```{r}\npip install matplotlib\n```\n\n[^1]: It is possible that the desired virtual environment is activated, but does not appear so because the command prompt does not display the name in parentheses. Positron will display a message in the lower right hand corner of the application when this occurs."},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":false,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":true,"output-file":"setup_venv.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.36","theme":"cosmo","title":"Set up venv in Python","html":{"toc":true}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}