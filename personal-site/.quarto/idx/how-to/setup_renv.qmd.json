{"title":"Set up renv in R","markdown":{"yaml":{"title":"Set up renv in R","html":{"toc":true},"execute":{"eval":false}},"headingText":"renv","containsRefs":false,"markdown":"\n\nrenv is an R package that helps you create and manage isolated project environments. It captures the specific package versions used in a project as snapshots, ensuring that your code runs consistently over time and across systems. It enables reproducible research and easy collaboration, similar to Python’s virtualenv.\n\n\n### Initialize and activate a new renv environment\nInitializing an renv is simple. Once the packages in installed simply call the following command.\n```{r}\nrenv::init()\n```\n\nOnce the environment is initialized, it can be activated. Once activated, it will automatically launch next time you open up the working directory (VS Code/Positron) and/or RStudio project.\n```{r}\nrenv::activate()\n```\n\n### Configure .Rprofile (optional)\nBy default, base R packages are installed in a system-level directory (e.g., under Program Files on Windows), while user-installed packages are typically stored in a user-specific location like AppData\\Local\\R.\n\nWhen a new renv environment is initiate, it sets up a project-local library. During package installation, if a needed package already exists elsewhere on your system, renv will create a symbolic link (symlink) to that existing package to avoid duplicating files across multiple projects. This behavior saves disk space and speeds up environment setup.\n\nHowever, in my workflow, I use OneDrive to access projects across multiple machines and this symlink-based approach can cause issues.\n\nTo avoid symlinks entirely and ensure all packages are physically stored within the project (mimicking Python’s venv behavior), I add the following line a project’s .Rprofile file:\n\n```{r}\noptions(renv.settings.use.cache = FALSE) # Set to false to prevent symlinks\n```\n\nThe following commands can be used to check library paths and settings to ensure the renv is properly configured.\n```{r}\nrenv::settings$use.cache()\nrenv::paths$library() # Check libraries\n```\n\n### Configure .renvignore\nUpon startup, renv scans the project files to detect which R functions are used, in order to identify missing packages and prompt you to install any missing dependencies. While useful, this scanning process can slow down loading the renv, especially if your project includes large or irrelevant files such as, Word documents, PDFs, or Python libraries.\n\nThe solution to overcome is to create a .renvignore file. Any file type or directory specified in this file will be excluded from scanning up loading an renv.\n\nTo create the file in Positron, right-click in the Explorer pane  and choose “New File…”, then name the file .renvignore, open the saved file and add separate lines for directories or file types.\n\n```{r}\n/py_env # exclude the py_env directory\n\n*.html  # excludes all .html files\n*.yml   # excludes all .yml files\n*.ipynb # excludes all .ipynb files\n```\n\n### Install packages\n```{r}\nrenv::install()\n```\n\n### Check the status of a project and record the current state of packages\n```{r}\nrenv::status()\nrenv::snapshot()\n```\n\n\n\n","srcMarkdownNoYaml":"\n\n## renv\nrenv is an R package that helps you create and manage isolated project environments. It captures the specific package versions used in a project as snapshots, ensuring that your code runs consistently over time and across systems. It enables reproducible research and easy collaboration, similar to Python’s virtualenv.\n\n\n### Initialize and activate a new renv environment\nInitializing an renv is simple. Once the packages in installed simply call the following command.\n```{r}\nrenv::init()\n```\n\nOnce the environment is initialized, it can be activated. Once activated, it will automatically launch next time you open up the working directory (VS Code/Positron) and/or RStudio project.\n```{r}\nrenv::activate()\n```\n\n### Configure .Rprofile (optional)\nBy default, base R packages are installed in a system-level directory (e.g., under Program Files on Windows), while user-installed packages are typically stored in a user-specific location like AppData\\Local\\R.\n\nWhen a new renv environment is initiate, it sets up a project-local library. During package installation, if a needed package already exists elsewhere on your system, renv will create a symbolic link (symlink) to that existing package to avoid duplicating files across multiple projects. This behavior saves disk space and speeds up environment setup.\n\nHowever, in my workflow, I use OneDrive to access projects across multiple machines and this symlink-based approach can cause issues.\n\nTo avoid symlinks entirely and ensure all packages are physically stored within the project (mimicking Python’s venv behavior), I add the following line a project’s .Rprofile file:\n\n```{r}\noptions(renv.settings.use.cache = FALSE) # Set to false to prevent symlinks\n```\n\nThe following commands can be used to check library paths and settings to ensure the renv is properly configured.\n```{r}\nrenv::settings$use.cache()\nrenv::paths$library() # Check libraries\n```\n\n### Configure .renvignore\nUpon startup, renv scans the project files to detect which R functions are used, in order to identify missing packages and prompt you to install any missing dependencies. While useful, this scanning process can slow down loading the renv, especially if your project includes large or irrelevant files such as, Word documents, PDFs, or Python libraries.\n\nThe solution to overcome is to create a .renvignore file. Any file type or directory specified in this file will be excluded from scanning up loading an renv.\n\nTo create the file in Positron, right-click in the Explorer pane  and choose “New File…”, then name the file .renvignore, open the saved file and add separate lines for directories or file types.\n\n```{r}\n/py_env # exclude the py_env directory\n\n*.html  # excludes all .html files\n*.yml   # excludes all .yml files\n*.ipynb # excludes all .ipynb files\n```\n\n### Install packages\n```{r}\nrenv::install()\n```\n\n### Check the status of a project and record the current state of packages\n```{r}\nrenv::status()\nrenv::snapshot()\n```\n\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":false,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":true,"output-file":"setup_renv.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.36","theme":"cosmo","title":"Set up renv in R","html":{"toc":true}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}